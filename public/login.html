<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Account Access - Mini Market Inventory</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
          },
          animation: {
            'gradient': 'gradient 10s ease infinite',
            'float': 'float 3s ease-in-out infinite',
            'float-slow': 'float 6s ease-in-out infinite',
            'float-reverse': 'floatReverse 4s ease-in-out infinite',
            'spin-slow': 'spin 6s linear infinite',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'shake': 'shake 0.5s ease-in-out',
            'wiggle': 'wiggle 0.5s ease-in-out',
            'bounce-slow': 'bounce 3s linear infinite',
            'fade-in': 'fadeIn 0.6s ease-out forwards',
            'slide-up': 'slideUp 0.5s ease-out forwards',
            'slide-in-right': 'slideInRight 0.5s ease-out forwards',
            'slide-in-left': 'slideInLeft 0.5s ease-out forwards',
            'blur-in': 'blurIn 0.5s ease-out forwards',
          },
          keyframes: {
            gradient: {
              '0%': { backgroundPosition: '0% 50%' },
              '50%': { backgroundPosition: '100% 50%' },
              '100%': { backgroundPosition: '0% 50%' }
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' }
            },
            floatReverse: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(10px)' }
            },
            shake: {
              '0%, 100%': { transform: 'translateX(0)' },
              '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' },
              '20%, 40%, 60%, 80%': { transform: 'translateX(5px)' }
            },
            wiggle: {
              '0%, 100%': { transform: 'rotate(-3deg)' },
              '50%': { transform: 'rotate(3deg)' }
            },
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { transform: 'translateY(20px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            slideInRight: {
              '0%': { transform: 'translateX(30px)', opacity: '0' },
              '100%': { transform: 'translateX(0)', opacity: '1' }
            },
            slideInLeft: {
              '0%': { transform: 'translateX(-30px)', opacity: '0' },
              '100%': { transform: 'translateX(0)', opacity: '1' }
            },
            blurIn: {
              '0%': { filter: 'blur(10px)', opacity: '0' },
              '100%': { filter: 'blur(0)', opacity: '1' }
            }
          }
        }
      }
    }
  </script>
  <style>
    .form-container {
      transform-origin: center;
      backface-visibility: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .input-field:focus + .input-highlight {
      width: 100%;
    }
    
    .input-highlight {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 2px;
      width: 0;
      background: linear-gradient(90deg, #38bdf8, #0ea5e9, #0284c7);
      transition: width 0.3s ease;
    }
    
    .auth-tab-indicator {
      position: absolute;
      bottom: 0;
      height: 3px;
      background: linear-gradient(90deg, #38bdf8, #0ea5e9, #0284c7);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 3px;
    }
    
    .floating-item {
      position: absolute;
      z-index: 1;
      opacity: 0.8;
      filter: blur(1px);
      user-select: none;
      pointer-events: none;
    }
    
    .background-grid {
      position: fixed;
      inset: 0;
      z-index: 0;
      background-size: 50px 50px;
      background-image: 
        linear-gradient(to right, rgba(255,255,255,0.05) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,0.05) 1px, transparent 1px);
      opacity: 0.5;
    }
    
    .card-shine {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        135deg,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0.05) 50%,
        rgba(255, 255, 255, 0) 100%
      );
      transform: translateY(-100%);
      transition: transform 0.6s ease;
    }
    
    .login-card:hover .card-shine {
      transform: translateY(100%);
    }
    
    @keyframes gradient-shift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    
    .bg-animate {
      background-size: 300% 300%;
      animation: gradient-shift 12s ease infinite;
    }
    
    .input-icon {
      transition: all 0.3s ease;
    }
    
    .input-field:focus ~ .input-icon {
      color: #38bdf8;
      transform: translateY(-2px);
    }
    
    .btn-animate {
      position: relative;
      overflow: hidden;
    }
    
    .btn-animate::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: -100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
    }
    
    .btn-animate:hover::after {
      left: 100%;
    }
    
    /* Added for better mobile experience */
    @media (max-width: 640px) {
      .floating-item {
        opacity: 0.4; /* Reduce opacity on mobile */
      }
      
      .auth-container {
        padding: 1rem; /* Ensure padding on small screens */
      }
    }

    /* Accessibility focus styles */
    .focus-visible:focus-visible {
      outline: 2px solid #38bdf8;
      outline-offset: 2px;
    }

    /* Prevent content shift on error */
    .error-container {
      min-height: 0;
      transition: all 0.3s ease;
    }
    .error-container.active {
      min-height: 60px;
    }

    /* Improved loading spinner */
    .spinner-container {
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .pulse-ripple {
      position: relative;
    }
    .pulse-ripple::before, .pulse-ripple::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 50%;
      background-color: rgba(56, 189, 248, 0.4);
      animation: pulse-ripple 1.8s cubic-bezier(0.65, 0, 0.34, 1) infinite;
      z-index: -1;
    }
    .pulse-ripple::after {
      animation-delay: 0.9s;
    }
    
    @keyframes pulse-ripple {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }
  </style>
</head>
<body class="bg-animate bg-gradient-to-br from-primary-900 via-purple-800 to-primary-800 dark:from-gray-900 dark:via-primary-900 dark:to-gray-900 min-h-screen overflow-x-hidden flex items-center justify-center px-4">
  <!-- Background elements -->
  <div class="background-grid"></div>
  
  <!-- Animated floating particles - Reduced number for mobile -->
  <div class="fixed inset-0 pointer-events-none overflow-hidden">
    <div class="floating-item text-primary-300/30 text-6xl sm:text-7xl top-[15%] left-[10%] animate-float-slow">
      <i class="fas fa-box"></i>
    </div>
    <div class="floating-item text-cyan-300/30 text-5xl sm:text-6xl bottom-[20%] right-[12%] animate-float-reverse hidden sm:block">
      <i class="fas fa-shopping-basket"></i>
    </div>
    <div class="floating-item text-violet-300/30 text-7xl top-[40%] right-[20%] animate-float-slow hidden md:block">
      <i class="fas fa-barcode"></i>
    </div>
    <div class="floating-item text-blue-300/30 text-4xl sm:text-5xl bottom-[30%] left-[15%] animate-float">
      <i class="fas fa-tags"></i>
    </div>
    <div class="floating-item text-indigo-300/30 text-8xl top-[60%] left-[25%] animate-float-reverse hidden lg:block">
      <i class="fas fa-store"></i>
    </div>
  </div>
  
  <!-- Main container with improved spacing for mobile -->
  <div class="relative w-full max-w-4xl mx-auto flex flex-col lg:flex-row items-center p-4 gap-6 lg:gap-8 z-10 my-8 sm:my-4">
    <!-- Left info panel - improved responsive layout -->
    <div class="w-full lg:w-2/5 text-white space-y-5 animate-fade-in opacity-0 order-2 lg:order-1" style="animation-delay: 0.2s">
      <div class="flex items-center mb-4">
        <div class="bg-white/10 backdrop-blur-lg p-2 sm:p-3 rounded-2xl shadow-lg mr-3 sm:mr-4">
          <i class="fas fa-shopping-cart text-primary-400 text-2xl sm:text-3xl"></i>
        </div>
        <h1 class="text-2xl sm:text-3xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-primary-300 to-cyan-300">Mini Market Inventory</h1>
      </div>
      
      <!-- Improved mobile spacing -->
      <div class="space-y-4 sm:space-y-6 backdrop-blur-md bg-white/5 p-4 sm:p-6 rounded-2xl border border-white/10">
        <h2 class="text-xl sm:text-2xl font-bold">Manage your inventory with ease</h2>
        <p class="text-gray-300 text-sm sm:text-base">Access your complete inventory management system with a secure login. Track products, manage stock, and analyze sales in one place.</p>
        
        <!-- Feature list with better spacing -->
        <div class="space-y-3 py-1 sm:py-2">
          <div class="flex items-center">
            <div class="flex-shrink-0 h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-primary-500/20 flex items-center justify-center">
              <i class="fas fa-chart-line text-primary-400 text-sm sm:text-base"></i>
            </div>
            <p class="ml-3 sm:ml-4 text-xs sm:text-sm text-gray-300">Real-time sales analytics</p>
          </div>
          
          <div class="flex items-center">
            <div class="flex-shrink-0 h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-primary-500/20 flex items-center justify-center">
              <i class="fas fa-boxes text-primary-400 text-sm sm:text-base"></i>
            </div>
            <p class="ml-3 sm:ml-4 text-xs sm:text-sm text-gray-300">Complete stock management</p>
          </div>
          
          <div class="flex items-center">
            <div class="flex-shrink-0 h-7 w-7 sm:h-8 sm:w-8 rounded-full bg-primary-500/20 flex items-center justify-center">
              <i class="fas fa-bell text-primary-400 text-sm sm:text-base"></i>
            </div>
            <p class="ml-3 sm:ml-4 text-xs sm:text-sm text-gray-300">Low stock alerts</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Right auth panel with improved sizing for mobile -->
    <div class="w-full lg:w-3/5 animate-fade-in opacity-0 order-1 lg:order-2" style="animation-delay: 0.4s">
      <div class="login-card relative overflow-hidden backdrop-blur-xl bg-white/10 dark:bg-gray-800/20 p-5 sm:p-8 rounded-2xl shadow-2xl border border-white/20 dark:border-gray-700/30">
        <div class="card-shine"></div>
        
        <!-- Decorative blobs -->
        <div class="absolute -top-20 -right-20 w-40 h-40 bg-gradient-to-br from-primary-500/30 to-cyan-500/30 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-20 -left-20 w-40 h-40 bg-gradient-to-br from-purple-500/30 to-primary-500/30 rounded-full blur-3xl"></div>
        
        <!-- Tabs navigation - improved for touch -->
        <div class="flex justify-center mb-6 sm:mb-10 relative z-10">
          <div class="relative flex">
            <button id="loginTab" class="relative text-lg sm:text-xl font-medium text-white py-2 px-4 sm:px-6 transition-all focus-visible" role="tab" aria-selected="true" aria-controls="loginForm">
              Sign In
            </button>
            <button id="registerTab" class="relative text-lg sm:text-xl font-medium text-white/60 hover:text-white/80 py-2 px-4 sm:px-6 transition-all focus-visible" role="tab" aria-selected="false" aria-controls="registerForm">
              Sign Up
            </button>
            <div id="tabIndicator" class="auth-tab-indicator"></div>
          </div>
        </div>
        
        <!-- Error message with min-height to prevent layout shift -->
        <div id="errorMessage" class="hidden error-container mb-4 sm:mb-6 p-3 sm:p-4 rounded-xl bg-gradient-to-r from-red-500/20 to-pink-500/20 text-red-200 text-xs sm:text-sm flex items-center">
          <i class="fas fa-exclamation-circle mr-2"></i>
          <span id="errorText"></span>
        </div>
        
        <!-- Login Form - improved accessibility and mobile layout -->
        <div id="loginForm" class="form-container space-y-4 sm:space-y-6 animate-blur-in opacity-0" style="animation-delay: 0.6s" role="tabpanel" aria-labelledby="loginTab">
          <form id="loginFormElement" novalidate>
            <div class="relative mb-4">
              <label for="loginEmail" class="text-xs text-white/70 mb-1 block ml-1">Email Address</label>
              <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none input-icon mt-6">
                <i class="fas fa-envelope text-gray-400"></i>
              </div>
              <input type="email" id="loginEmail" placeholder="Enter your email" 
                   aria-required="true" autocomplete="email"
                   class="input-field w-full bg-white/5 border-0 text-white rounded-xl py-3 sm:py-4 pl-12 pr-4 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50 transition-all duration-300 focus-visible">
              <div class="input-highlight"></div>
              <p class="error-text text-red-300 text-xs mt-1 ml-1 hidden" id="loginEmailError"></p>
            </div>
            
            <div class="relative mb-4">
              <label for="loginPassword" class="text-xs text-white/70 mb-1 block ml-1">Password</label>
              <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none input-icon mt-6">
                <i class="fas fa-lock text-gray-400"></i>
              </div>
              <input type="password" id="loginPassword" placeholder="Enter your password" 
                    aria-required="true" autocomplete="current-password"
                    class="input-field w-full bg-white/5 border-0 text-white rounded-xl py-3 sm:py-4 pl-12 pr-10 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50 transition-all duration-300 focus-visible">
              <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 mt-3 text-gray-400 hover:text-white transition-colors focus-visible rounded-full p-1" id="togglePassword" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
              </button>
              <div class="input-highlight"></div>
              <p class="error-text text-red-300 text-xs mt-1 ml-1 hidden" id="loginPasswordError"></p>
            </div>
            
            <div class="flex items-center justify-between mb-5">
              <div class="flex items-center">
                <label class="relative inline-flex items-center cursor-pointer">
                  <input id="remember-me" type="checkbox" class="sr-only peer focus-visible">
                  <div class="w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary-600"></div>
                  <span class="ml-3 text-xs sm:text-sm text-gray-300">Remember me</span>
                </label>
              </div>
              <a href="#" class="text-xs sm:text-sm font-medium text-primary-300 hover:text-white transition-colors focus-visible rounded-md px-1 py-0.5">Forgot password?</a>
            </div>
            
            <button id="loginSubmit" type="submit" 
                    class="btn-animate w-full bg-gradient-to-r from-primary-600 to-primary-500 text-white py-3 sm:py-4 px-4 rounded-xl font-medium hover:shadow-lg hover:from-primary-500 hover:to-primary-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] focus-visible">
              <div class="flex items-center justify-center">
                <i class="fas fa-sign-in-alt mr-2"></i>
                <span>Sign in</span>
              </div>
            </button>
          </form>
        </div>
        
        <!-- Register Form - improved accessibility and mobile layout -->
        <div id="registerForm" class="form-container space-y-4 sm:space-y-6 hidden" role="tabpanel" aria-labelledby="registerTab">
          <form id="registerFormElement" novalidate>
            <div class="relative mb-4">
              <label for="name" class="text-xs text-white/70 mb-1 block ml-1">Full Name</label>
              <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none input-icon mt-6">
                <i class="fas fa-user text-gray-400"></i>
              </div>
              <input type="text" id="name" placeholder="Enter your full name" 
                   aria-required="true" autocomplete="name"
                   class="input-field w-full bg-white/5 border-0 text-white rounded-xl py-3 sm:py-4 pl-12 pr-4 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50 transition-all duration-300 focus-visible">
              <div class="input-highlight"></div>
              <p class="error-text text-red-300 text-xs mt-1 ml-1 hidden" id="nameError"></p>
            </div>
            
            <div class="relative mb-4">
              <label for="registerEmail" class="text-xs text-white/70 mb-1 block ml-1">Email Address</label>
              <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none input-icon mt-6">
                <i class="fas fa-envelope text-gray-400"></i>
              </div>
              <input type="email" id="registerEmail" placeholder="Enter your email" 
                   aria-required="true" autocomplete="email"  
                   class="input-field w-full bg-white/5 border-0 text-white rounded-xl py-3 sm:py-4 pl-12 pr-4 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50 transition-all duration-300 focus-visible">
              <div class="input-highlight"></div>
              <p class="error-text text-red-300 text-xs mt-1 ml-1 hidden" id="registerEmailError"></p>
            </div>
            
            <div class="relative mb-4">
              <label for="registerPassword" class="text-xs text-white/70 mb-1 block ml-1">Password</label>
              <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none input-icon mt-6">
                <i class="fas fa-lock text-gray-400"></i>
              </div>
              <input type="password" id="registerPassword" placeholder="Create a password" 
                   aria-required="true" autocomplete="new-password"
                   class="input-field w-full bg-white/5 border-0 text-white rounded-xl py-3 sm:py-4 pl-12 pr-10 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50 transition-all duration-300 focus-visible">
              <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 mt-3 text-gray-400 hover:text-white transition-colors focus-visible rounded-full p-1" id="toggleRegisterPassword" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
              </button>
              <div class="input-highlight"></div>
              <p class="error-text text-red-300 text-xs mt-1 ml-1 hidden" id="registerPasswordError"></p>
            </div>
            
            <div class="relative mb-4">
              <label for="confirmPassword" class="text-xs text-white/70 mb-1 block ml-1">Confirm Password</label>
              <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none input-icon mt-6">
                <i class="fas fa-shield-alt text-gray-400"></i>
              </div>
              <input type="password" id="confirmPassword" placeholder="Confirm your password" 
                   aria-required="true" autocomplete="new-password"
                   class="input-field w-full bg-white/5 border-0 text-white rounded-xl py-3 sm:py-4 pl-12 pr-10 placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-primary-500/50 transition-all duration-300 focus-visible">
              <button type="button" class="absolute right-3 top-1/2 transform -translate-y-1/2 mt-3 text-gray-400 hover:text-white transition-colors focus-visible rounded-full p-1" id="toggleConfirmPassword" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
              </button>
              <div class="input-highlight"></div>
              <p class="error-text text-red-300 text-xs mt-1 ml-1 hidden" id="confirmPasswordError"></p>
            </div>
            
            <button id="registerSubmit" type="submit" 
                  class="btn-animate w-full bg-gradient-to-r from-primary-600 to-primary-500 text-white py-3 sm:py-4 px-4 rounded-xl font-medium hover:shadow-lg hover:from-primary-500 hover:to-primary-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] focus-visible">
              <div class="flex items-center justify-center">
                <i class="fas fa-user-plus mr-2"></i>
                <span>Create Account</span>
              </div>
            </button>
          </form>
        </div>
        
        <!-- Dark mode toggle - improved for accessibility -->
        <div class="absolute top-3 right-3 sm:top-4 sm:right-4">
          <button id="darkModeToggle" class="p-2 rounded-full bg-white/5 hover:bg-white/10 text-white/70 hover:text-white transition-all focus-visible" aria-label="Toggle dark mode">
            <i class="fas fa-moon dark:hidden text-sm sm:text-base"></i>
            <i class="fas fa-sun hidden dark:block text-sm sm:text-base"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // Dark mode toggle
    const html = document.documentElement;
    const darkModeToggle = document.getElementById('darkModeToggle');
    
    // Check for saved theme preference or respect OS preference
    if (localStorage.getItem('theme') === 'dark' || 
        (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
    
    // Toggle dark/light mode
    darkModeToggle.addEventListener('click', () => {
      if (html.classList.contains('dark')) {
        html.classList.remove('dark');
        localStorage.setItem('theme', 'light');
      } else {
        html.classList.add('dark');
        localStorage.setItem('theme', 'dark');
      }
    });
    
    // Tab indicator initialization and movement
    const loginTab = document.getElementById('loginTab');
    const registerTab = document.getElementById('registerTab');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const errorMessage = document.getElementById('errorMessage');
    const tabIndicator = document.getElementById('tabIndicator');
    
    // Set initial tab indicator position
    function updateTabIndicator(activeTab) {
      const tabRect = activeTab.getBoundingClientRect();
      const parentRect = activeTab.parentElement.getBoundingClientRect();
      
      tabIndicator.style.width = `${tabRect.width}px`;
      tabIndicator.style.left = `${tabRect.left - parentRect.left}px`;
    }
    
    // Initialize tab indicator - using requestAnimationFrame for better performance
    requestAnimationFrame(() => {
      updateTabIndicator(loginTab);
    });
    
    // Handle window resize to adjust tab indicator
    window.addEventListener('resize', () => {
      // Determine which tab is active
      const activeTab = loginForm.classList.contains('hidden') ? registerTab : loginTab;
      updateTabIndicator(activeTab);
    });
    
    loginTab.addEventListener('click', () => {
      loginTab.setAttribute('aria-selected', 'true');
      registerTab.setAttribute('aria-selected', 'false');
      
      loginTab.classList.remove('text-white/60');
      loginTab.classList.add('text-white');
      registerTab.classList.add('text-white/60');
      registerTab.classList.remove('text-white');
      
      updateTabIndicator(loginTab);
      
      loginForm.classList.remove('hidden');
      registerForm.classList.add('hidden');
      errorMessage.classList.add('hidden');
      
      // Animation for form change
      loginForm.classList.add('animate-blur-in');
      loginForm.style.opacity = '0';
      setTimeout(() => {
        loginForm.style.opacity = '1';
      }, 10);
      
      // Set focus on email input after animation completes
      setTimeout(() => {
        document.getElementById('loginEmail').focus();
      }, 50);
    });
    
    registerTab.addEventListener('click', () => {
      registerTab.setAttribute('aria-selected', 'true');
      loginTab.setAttribute('aria-selected', 'false');
      
      registerTab.classList.remove('text-white/60');
      registerTab.classList.add('text-white');
      loginTab.classList.add('text-white/60');
      loginTab.classList.remove('text-white');
      
      updateTabIndicator(registerTab);
      
      registerForm.classList.remove('hidden');
      loginForm.classList.add('hidden');
      errorMessage.classList.add('hidden');
      
      // Animation for form change
      registerForm.classList.add('animate-blur-in');
      registerForm.style.opacity = '0';
      setTimeout(() => {
        registerForm.style.opacity = '1';
      }, 10);
      
      // Set focus on name input after animation completes
      setTimeout(() => {
        document.getElementById('name').focus();
      }, 50);
    });
    
    // Toggle password visibility with improved accessibility
    function setupPasswordToggle(toggleId, passwordId) {
      const toggle = document.getElementById(toggleId);
      const password = document.getElementById(passwordId);
      
      toggle.addEventListener('click', function() {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        
        // Update aria-label for screen readers
        const newAction = type === 'password' ? 'Show' : 'Hide';
        toggle.setAttribute('aria-label', `${newAction} password`);
        
        // Toggle icon
        this.querySelector('i').classList.toggle('fa-eye');
        this.querySelector('i').classList.toggle('fa-eye-slash');
      });
    }
    
    setupPasswordToggle('togglePassword', 'loginPassword');
    setupPasswordToggle('toggleRegisterPassword', 'registerPassword');
    setupPasswordToggle('toggleConfirmPassword', 'confirmPassword');
    
    // Form validation helpers
    function showInputError(inputId, errorMessage) {
      const input = document.getElementById(inputId);
      const errorElement = document.getElementById(inputId + 'Error');
      
      if (input && errorElement) {
        input.classList.add('border', 'border-red-500/50');
        errorElement.textContent = errorMessage;
        errorElement.classList.remove('hidden');
      }
    }
    
    function clearInputError(inputId) {
      const input = document.getElementById(inputId);
      const errorElement = document.getElementById(inputId + 'Error');
      
      if (input && errorElement) {
        input.classList.remove('border', 'border-red-500/50');
        errorElement.classList.add('hidden');
      }
    }
    
    function validateEmail(email) {
      const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      return re.test(String(email).toLowerCase());
    }
    
    function validateLoginForm() {
      let isValid = true;
      
      // Clear previous errors
      clearInputError('loginEmail');
      clearInputError('loginPassword');
      
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      
      if (!email) {
        showInputError('loginEmail', 'Email is required');
        isValid = false;
      } else if (!validateEmail(email)) {
        showInputError('loginEmail', 'Please enter a valid email address');
        isValid = false;
      }
      
      if (!password) {
        showInputError('loginPassword', 'Password is required');
        isValid = false;
      }
      
      return isValid;
    }
    
    function validateRegisterForm() {
      let isValid = true;
      
      // Clear previous errors
      clearInputError('name');
      clearInputError('registerEmail');
      clearInputError('registerPassword');
      clearInputError('confirmPassword');
      
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('registerEmail').value.trim();
      const password = document.getElementById('registerPassword').value;
      const confirmPwd = document.getElementById('confirmPassword').value;
      
      if (!name) {
        showInputError('name', 'Name is required');
        isValid = false;
      }
      
      if (!email) {
        showInputError('registerEmail', 'Email is required');
        isValid = false;
      } else if (!validateEmail(email)) {
        showInputError('registerEmail', 'Please enter a valid email address');
        isValid = false;
      }
      
      if (!password) {
        showInputError('registerPassword', 'Password is required');
        isValid = false;
      } else if (password.length < 8) {
        showInputError('registerPassword', 'Password must be at least 8 characters');
        isValid = false;
      }
      
      if (!confirmPwd) {
        showInputError('confirmPassword', 'Please confirm your password');
        isValid = false;
      } else if (password !== confirmPwd) {
        showInputError('confirmPassword', 'Passwords do not match');
        isValid = false;
      }
      
      return isValid;
    }
    
    // Improved login form submission with validation
    document.getElementById('loginFormElement').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      if (!validateLoginForm()) {
        return;
      }
      
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      
      // Show loading state with improved spinner
      const loginButton = document.getElementById('loginSubmit');
      loginButton.disabled = true;
      loginButton.innerHTML = `
        <div class="spinner-container">
          <div class="pulse-ripple flex items-center justify-center">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          </div>
          <span class="ml-2">Signing in...</span>
        </div>
      `;
      
      try {
        const res = await fetch('/api/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, password })
        });
        
        const data = await res.json();
        
        if (data.token) {
          // Success animation
          loginButton.innerHTML = `
            <div class="flex items-center justify-center">
              <i class="fas fa-check-circle mr-2"></i>
              <span>Success!</span>
            </div>
          `;
          
          // Store token and redirect
          if (document.getElementById('remember-me').checked) {
            localStorage.setItem('token', data.token);
            localStorage.setItem('rememberMe', 'true');
          } else {
            localStorage.setItem('token', data.token);
            localStorage.removeItem('rememberMe');
          }
          
          // Create loading overlay with improved animation
          const overlay = document.createElement('div');
          overlay.className = 'fixed inset-0 bg-gradient-to-br from-primary-800 to-primary-900 z-50 flex items-center justify-center flex-col transition-opacity duration-500';
          overlay.innerHTML = `
            <div class="mb-6 relative pulse-ripple">
              <i class="fas fa-shopping-cart text-primary-400 text-4xl sm:text-6xl animate-bounce-slow"></i>
            </div>
            <h2 class="text-white text-2xl sm:text-3xl font-bold mb-2 sm:mb-3">Welcome Back!</h2>
            <p class="text-primary-200 text-sm sm:text-base">Accessing your inventory system...</p>
            <div class="mt-4 sm:mt-6 w-32 h-1 bg-white/20 rounded-full overflow-hidden">
              <div class="h-full bg-gradient-to-r from-primary-500 to-primary-400 animate-pulse"></div>
            </div>
          `;
          document.body.appendChild(overlay);
          
          setTimeout(() => {
            window.location.href = 'dashboard.html';
          }, 1500);
        } else {
          // Show error
          document.getElementById('errorText').textContent = data.error || 'Login failed. Please check your credentials.';
          errorMessage.classList.remove('hidden');
          errorMessage.classList.add('active');
          
          // Reset button
          loginButton.disabled = false;
          loginButton.innerHTML = `
            <div class="flex items-center justify-center">
              <i class="fas fa-sign-in-alt mr-2"></i>
              <span>Sign in</span>
            </div>
          `;
          
          // Shake animation for error
          loginForm.classList.add('animate-shake');
          setTimeout(() => loginForm.classList.remove('animate-shake'), 500);
        }
      } catch (err) {
        document.getElementById('errorText').textContent = 'Connection error. Please try again later.';
        errorMessage.classList.remove('hidden');
        errorMessage.classList.add('active');
        
        // Reset button
        loginButton.disabled = false;
        loginButton.innerHTML = `
          <div class="flex items-center justify-center">
            <i class="fas fa-sign-in-alt mr-2"></i>
            <span>Sign in</span>
          </div>
        `;
      }
    });
    
    // Improved register form submission with validation
    document.getElementById('registerFormElement').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      if (!validateRegisterForm()) {
        return;
      }
      
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('registerEmail').value.trim();
      const password = document.getElementById('registerPassword').value;
      
      // Show loading state with improved spinner
      const registerButton = document.getElementById('registerSubmit');
      registerButton.disabled = true;
      registerButton.innerHTML = `
        <div class="spinner-container">
          <div class="pulse-ripple flex items-center justify-center">
            <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
          </div>
          <span class="ml-2">Creating account...</span>
        </div>
      `;
      
      try {
        const res = await fetch('/api/auth/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, email, password })
        });
        
        const data = await res.json();
        
        if (!data.error) {
          // Success animation
          registerButton.innerHTML = `
            <div class="flex items-center justify-center">
              <i class="fas fa-check-circle mr-2"></i>
              <span>Account created!</span>
            </div>
          `;
          
          // Switch to login form after registration
          setTimeout(() => {
            loginTab.click();
            // Auto-fill email for convenience
            document.getElementById('loginEmail').value = email;
            
            // Reset register button for next time
            registerButton.disabled = false;
            registerButton.innerHTML = `
              <div class="flex items-center justify-center">
                <i class="fas fa-user-plus mr-2"></i>
                <span>Create Account</span>
              </div>
            `;
            
            // Show success message
            document.getElementById('errorText').textContent = 'Account created successfully! You can now sign in.';
            errorMessage.classList.remove('hidden');
            errorMessage.classList.add('active');
            errorMessage.style.backgroundColor = 'rgba(52, 211, 153, 0.2)';
            errorMessage.style.color = 'rgb(167, 243, 208)';
            document.querySelector('#errorMessage i').className = 'fas fa-check-circle mr-2';
          }, 1500);
        } else {
          // Show error
          document.getElementById('errorText').textContent = data.error || 'Registration failed. Please try again.';
          errorMessage.classList.remove('hidden');
          errorMessage.classList.add('active');
          
          // Reset button
          registerButton.disabled = false;
          registerButton.innerHTML = `
            <div class="flex items-center justify-center">
              <i class="fas fa-user-plus mr-2"></i>
              <span>Create Account</span>
            </div>
          `;
          
          // Shake animation for error
          registerForm.classList.add('animate-shake');
          setTimeout(() => registerForm.classList.remove('animate-shake'), 500);
        }
      } catch (err) {
        document.getElementById('errorText').textContent = 'Connection error. Please try again later.';
        errorMessage.classList.remove('hidden');
        errorMessage.classList.add('active');
        
        // Reset button
        registerButton.disabled = false;
        registerButton.innerHTML = `
          <div class="flex items-center justify-center">
            <i class="fas fa-user-plus mr-2"></i>
            <span>Create Account</span>
          </div>
        `;
      }
    });
    
    // Add a "Remember me" functionality
    document.getElementById('remember-me').addEventListener('change', function() {
      if (this.checked) {
        localStorage.setItem('rememberMe', 'true');
      } else {
        localStorage.removeItem('rememberMe');
      }
    });
    
    // Check if "Remember me" was previously selected
    if (localStorage.getItem('rememberMe') === 'true') {
      document.getElementById('remember-me').checked = true;
    }
    
    // Input validation on blur for better user experience
    document.getElementById('loginEmail').addEventListener('blur', function() {
      if (this.value && !validateEmail(this.value)) {
        showInputError('loginEmail', 'Please enter a valid email address');
      } else {
        clearInputError('loginEmail');
      }
    });
    
    document.getElementById('registerEmail').addEventListener('blur', function() {
      if (this.value && !validateEmail(this.value)) {
        showInputError('registerEmail', 'Please enter a valid email address');
      } else {
        clearInputError('registerEmail');
      }
    });
    
    document.getElementById('registerPassword').addEventListener('blur', function() {
      if (this.value && this.value.length < 8) {
        showInputError('registerPassword', 'Password must be at least 8 characters');
      } else {
        clearInputError('registerPassword');
      }
    });
    
    document.getElementById('confirmPassword').addEventListener('blur', function() {
      const password = document.getElementById('registerPassword').value;
      if (this.value && this.value !== password) {
        showInputError('confirmPassword', 'Passwords do not match');
      } else {
        clearInputError('confirmPassword');
      }
    });
    
    // Clear error on input focus
    const allInputs = document.querySelectorAll('input');
    allInputs.forEach(input => {
      input.addEventListener('focus', function() {
        clearInputError(this.id);
        errorMessage.classList.add('hidden');
      });
    });
    
    // Set initial focus on page load
    window.addEventListener('DOMContentLoaded', () => {
      // Delayed focus for better user experience after animations
      setTimeout(() => {
        document.getElementById('loginEmail').focus();
      }, 1000);
      
      // Check for token and redirect if already logged in
      if (localStorage.getItem('token')) {
        window.location.href = 'dashboard.html';
      }
    });
  </script>
</body>
</html>